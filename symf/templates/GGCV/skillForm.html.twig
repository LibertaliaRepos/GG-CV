{% set title_class = '' %}
{% set anchor_class = '' %}

{% extends 'base.html.twig' %}

{% block title %} Administration compétances {{ parent() }} {% endblock %}
{% block stylesheets %}
  {{ parent() }}
<!--  FOALA EDITOR  -->
  <!-- Include external CSS. -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="{{ asset('_froala/css/froala_editor.css') }}">
  <link rel="stylesheet" href="{{ asset('_froala/css/froala_style.css') }}">
  <link rel="stylesheet" href="{{ asset('_froala/css/plugins/code_view.css') }}">
  <link rel="stylesheet" href="{{ asset('_froala/css/plugins/image_manager.css') }}">
  <link rel="stylesheet" href="{{ asset('_froala/css/plugins/image.css') }}">
  <link rel="stylesheet" href="{{ asset('_froala/css/plugins/table.css') }}">
  <link rel="stylesheet" href="{{ asset('_froala/css/plugins/video.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.3.0/codemirror.min.css">
{% endblock %}


{% block leftMenu %}
  {{ include('menu/adminLeftMenu.html.twig') }}
{% endblock %}

{% block contentBody %}
  <article id="content">
    <h1>Compétance</h1>
    <div id="skillAdmin">
      
      {{ form_start(form, {'attr': {'id': 'skillForm', 'method': 'POST'}}) }}
          <fieldset id="skillFields" class="fieldset">
            <legend>Ajouter une compétance</legend>
            
            {% if form.title.vars.errors|length %}
              {% set title_class = 'callout alert' %}
            {% endif %}
            <label id="titleLab" class="{{ title_class }}">
              Titre
              <span class="help-text">(obligatoire)</span>: 
              {{ form_widget(form.title) }}
              
              {% if form.title.vars.errors|length %}
                <span class="help-text alert">
                  {{ form.title.vars.errors }}
                </span>
              {% endif %}
              
            </label>
            
            {% if form.anchor.vars.errors|length %}
              {% set anchor_class = 'callout alert' %}
            {% endif %}
            <label id="anchorLab" class="{{ anchor_class }}">
              Ancre
              <span class="help-text">(obligatoire)</span>: 
              {{ form_widget(form.anchor) }}
              
              {% if form.anchor.vars.errors|length %}
                <span class="help-text alert">
                  {% for error in form.anchor.vars.errors %}
                    {{ error.message }}
                    {% if not loop.last %}
                      <br />
                    {% endif %}
                  {% endfor %}
                </span>
              {% endif %}
              
            </label>

            <label id="explanationLab" for="{{ form.explanation.vars.id }}" aria-describedby="">
              Description
              <span class="help-text">(obligatoire)</span>

            </label>
            {{ form_widget(form.explanation) }}
            
            {% if form.explanation.vars.errors|length %}
                <p id="editorHelper" class="help-text alert callout">
                  {% for error in form.explanation.vars.errors %}
                    {{ error.message }}
                    {% if not loop.last %}
                      <br />
                    {% endif %}
                  {% endfor %}
                </p>
              {% endif %}
            
          </fieldset>
  <!--      reset / submit      -->
          <div class="button-group">
            {{ form_widget(form.annuler, {'attr': {'class': 'button alert', 'value': 'Abandon'}}) }}
            {{ form_widget(form.ajouter, {'attr': {'class': 'button success', 'value': 'Ajouter'}}) }}
          </div>
          
      
      {{ form_end(form) }}
      
      
    </div>
  </article>
{% endblock %}

{% block javascripts %}
  {{ parent() }}
  <!-- Include external Froala JS libs. -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.3.0/codemirror.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.3.0/mode/xml/xml.min.js"></script>
    <script type="text/javascript" src="{{ asset('_froala/js/froala_editor.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('_froala/js/plugins/align.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('_froala/js/plugins/code_beautifier.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('_froala/js/plugins/code_view.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('_froala/js/plugins/char_counter.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('_froala/js/plugins/draggable.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('_froala/js/plugins/image.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('_froala/js/plugins/image_manager.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('_froala/js/plugins/link.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('_froala/js/plugins/lists.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('_froala/js/plugins/paragraph_format.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('_froala/js/plugins/paragraph_style.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('_froala/js/plugins/table.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('_froala/js/plugins/video.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('_froala/js/plugins/url.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('_froala/js/plugins/entities.min.js') }}"></script>
    
    <script>
      $(function() { 
        $('#{{ form.explanation.vars.id }}').froalaEditor(
          {
            enter: $.FroalaEditor.ENTER_P, 
            placeholderText: null,
            charCounterCount: false, 
            toolbarButtons: ['html'],
            height: 200
          }
        ) 
      });
    </script>
{% endblock %}